# ุชุบุฑุงุช ุชุงุฑุฎฺู ุชุญูู

## ุฎูุงุตู ุชุบุฑุงุช
ุชุงุฑุฎฺู ูุนุงููุงุช ุจุง ุชุงุฑุฎฺู ุชุญูู ุฌุงฺฏุฒู ุดุฏ. ุงู ุชุบุฑ ุดุงูู ููุงุฑุฏ ุฒุฑ ุงุณุช:

## 1. ุชุบุฑุงุช ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู (`src/database/repositories.py`)

### ุงูุฒูุฏู ุดุฏ: `AnalysisHistoryRepository`
- `add_analysis()`: ุฐุฎุฑู ุชุญูู ุฌุฏุฏ
- `get_user_analyses()`: ุฏุฑุงูุช ุชุงุฑุฎฺู ุชุญููโูุง ฺฉุงุฑุจุฑ
- `get_analyses_by_symbol()`: ุฏุฑุงูุช ุชุญููโูุง ฺฉ ุงุฑุฒ ุฎุงุต
- `get_analysis_stats()`: ุฏุฑุงูุช ุขูุงุฑ ุชุญููโูุง (ุชุนุฏุงุฏ ฺฉูุ ุณฺฏูุงูโูุง ุฎุฑุฏ/ูุฑูุด/ูฺฏูุฏุงุฑุ ูุงูฺฏู ุงุทููุงู)

### ุณุงุฎุชุงุฑ ุฏุงุฏู ุชุญูู:
```python
{
    'user_id': int,
    'symbol': str,
    'signal_type': str,  # BUY, SELL, HOLD
    'confidence': float,
    'price': float,
    'rsi': float,
    'trend': str,
    'analysis_type': str,  # 'normal' or 'smart'
    'timestamp': datetime
}
```

## 2. ุชุบุฑุงุช ุฏุฑ ููุฏูุฑูุง (`src/bot/handlers.py`)

### ุฌุงฺฏุฒูโูุง:
- โ `trade_history_repo` โ โ `analysis_history_repo`
- โ `trades_command()` โ โ `analyses_command()`
- โ `/trades` โ โ `/analyses`

### ุฏุณุชูุฑุงุช ุจูโุฑูุฒุฑุณุงู ุดุฏู:
- `/analyses` - ููุงุด ุชุงุฑุฎฺู ุชุญููโูุง
- `/performance` - ููุงุด ุขูุงุฑ ุชุญููโูุง ุจู ุฌุง ุขูุงุฑ ูุนุงููุงุช

### ุฐุฎุฑู ุฎูุฏฺฉุงุฑ ุชุญูู:
- `perform_analysis()`: ุฐุฎุฑู ุชุญูู ูุนููู
- `smartanalyze_command()`: ุฐุฎุฑู ุชุญูู ููุดููุฏ

## 3. ุชุบุฑุงุช ุฏุฑ ุฑุงุจุท ฺฉุงุฑุจุฑ

### ูุชูโูุง ุจูโุฑูุฒุฑุณุงู ุดุฏู:
- "ุชุงุฑุฎฺู ูุนุงููุงุช" โ "ุชุงุฑุฎฺู ุชุญููโูุง"
- "๐ ุชุงุฑุฎฺู ูุนุงููุงุช" โ "๐ ุชุงุฑุฎฺู ุชุญูู"
- "ุขูุงุฑ ูุนุงููุงุช" โ "ุขูุงุฑ ุชุญููโูุง"

### ุฏฺฉููโูุง ฺฉุจูุฑุฏ:
- "๐ ุชุงุฑุฎฺู ูุนุงููุงุช" โ "๐ ุชุงุฑุฎฺู ุชุญูู"

## 4. ุชุบุฑุงุช ุฏุฑ ุซุจุช ุฏุณุชูุฑุงุช (`bot.py`)

```python
# ูุจู:
CommandHandler("trades", self.handlers.trades_command)

# ุจุนุฏ:
CommandHandler("analyses", self.handlers.analyses_command)
```

## 5. ููุงุด ุขูุงุฑ ุฌุฏุฏ

### ุชุงุฑุฎฺู ุชุญูู (`/analyses`):
- ููุงุฏ ู ููุน ุณฺฏูุงู (ุฎุฑุฏ/ูุฑูุด/ูฺฏูุฏุงุฑ)
- ููุช ู ุฏุฑุตุฏ ุงุทููุงู
- ุฒูุงู ุชุญูู
- ุขูุงุฑ ฺฉู: ุชุนุฏุงุฏ ฺฉูุ ุณฺฏูุงูโูุง ุฎุฑุฏ/ูุฑูุด/ูฺฏูุฏุงุฑุ ูุงูฺฏู ุงุทููุงู

### ุขูุงุฑ ุนููฺฉุฑุฏ (`/performance`):
- ฺฉู ุชุญููโูุง
- ุณฺฏูุงู ุฎุฑุฏ
- ุณฺฏูุงู ูุฑูุด
- ุณฺฏูุงู ูฺฏูุฏุงุฑ
- ูุงูฺฏู ุงุทููุงู

## ูฺฉุงุช ููู

1. **ููุงุฌุฑุช ุฏุงุฏูโูุง**: ุฏุงุฏูโูุง ูุฏู ูุนุงููุงุช ููฺูุงู ุฏุฑ `trading_history` ุจุงู ูโูุงููุฏ ูู ุฏฺฏุฑ ุงุณุชูุงุฏู ููโุดููุฏ
2. **Collection ุฌุฏุฏ**: `analysis_history` ุฏุฑ MongoDB ุงุฌุงุฏ ูโุดูุฏ
3. **ุฐุฎุฑู ุฎูุฏฺฉุงุฑ**: ูุฑ ุชุญูู (ูุนููู ุง ููุดููุฏ) ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฐุฎุฑู ูโุดูุฏ
4. **ุณุงุฒฺฏุงุฑ**: ฺฉุฏ ูุฏู `TradingHistoryRepository` ููฺูุงู ููุฌูุฏ ุงุณุช ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง ุณุงุฑ ุจุฎุดโูุง

## ุฏุณุชูุฑุงุช ุฌุฏุฏ

```bash
/analyses          # ููุงุด ุชุงุฑุฎฺู ุชุญููโูุง
/performance       # ููุงุด ุขูุงุฑ ุชุญููโูุง
```

## ุชุงุฑุฎ ุชุบุฑุงุช
- 2025-01-27: ุฌุงฺฏุฒู ฺฉุงูู ุชุงุฑุฎฺู ูุนุงููุงุช ุจุง ุชุงุฑุฎฺู ุชุญูู
